<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div></div>
    <form id="form" style="display: flex; flex-direction: column; width: 500px; margin: 0 auto">
      <input type="text" name="myName" placeholder="Name" id="pname" />
      <input class="choose-file-btn" type="file" name="myImage" placeholder="Image" id="pimage" multiple />
      <input type="text" name="myShortDesc" placeholder="ShortDescription" id="pshortdesc" />
      <textarea name="myFullDesc" placeholder="Full Description" id="pfulldesc" rows="4" cols="50"></textarea>
      <textarea name="myMoreDetais" placeholder="Products More Details" id="pmoredetails" rows="4" cols="50"></textarea>
      <input type="number" name="myQuantity" placeholder="Quantity" id="pquantity" />
      <select name="myCategory" id="pcategory">
        <option value="Electronics">Electronics</option>
        <option value="Food">Food</option>
        <option value="Clothing">Clothing</option>
      </select>
      <select name="mySubCategory" id="psubcategory">
        <option value="Laptop">Laptop</option>
        <option value="Computer">Computer</option>
        <option value="Mobile">Mobile</option>
        <option value="Accessories">Accessories</option>
        <option value="Men">Men</option>
        <option value="Women">Women</option>
        <option value="Vegetables">Vegetables</option>
        <option value="Beverages">Beverages</option>
        <option value="Groceries">Groceries</option>
      </select>
      <input type="number" name="myPrice" placeholder="Price" id="pprice" />
      <label for="myFeature">Featured</label>
      <input type="checkbox" name="myFeature" placeholder="Feature" id="pfeature" />
      <input type="number" name="myDiscount" placeholder="Discount" id="pdiscount" />
      <button type="submit">Submit</button>
    </form>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
      integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script>
      fetch("http://localhost:5000/api/categories/get-categories", { method: "GET" })
        .then((res) => res.json())
        .then((data) => {
          const category = $("#pcategory");

          const sub_category = $("#psubcategory");
        });
      const form = document.querySelector("form");
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        var formData = new FormData();
        var name = document.getElementById("pname").value;
        var img = document.getElementById("pimage");
        var short_desc = document.getElementById("pshortdesc").value;
        var full_desc = document.getElementById("pfulldesc").value;
        var product_more_details = document.getElementById("pmoredetails").value;
        var quantity = document.getElementById("pquantity").value;
        var category = document.getElementById("pcategory").value;
        var sub_category = document.getElementById("psubcategory").value;
        var price = document.getElementById("pprice").value;
        var featured = document.getElementById("pfeature");
        var discount = document.getElementById("pdiscount").value;

        formData.append("name", name);
        for (let i = 0; i < img.files.length; i++) {
          formData.append("img", img.files[i]);
        }
        formData.append("short_desc", short_desc);
        formData.append("full_desc", full_desc);
        formData.append("product_more_details", product_more_details);
        formData.append("quantity", quantity);
        formData.append("category", category);
        formData.append("sub_category", sub_category);
        formData.append("price", price);
        formData.append("featured", featured.checked);
        formData.append("discount", discount);

        fetch("http://localhost:5000/api/products/create-product", { method: "POST", body: formData })
          .then((res) => res.json())
          .then((data) => console.log(data));
      });
    </script>
  </body>
</html>
